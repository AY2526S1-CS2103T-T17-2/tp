@startuml
!include style.puml
skinparam BoxPadding 0
skinparam ArrowFontStyle plain

actor User USER_COLOR

box UI UI_COLOR_T1
participant ":CommandBox" as CommandBox UI_COLOR
participant ":ResultDisplay" as ResultDisplay UI_COLOR
end box

User -> CommandBox : types "fi" and presses TAB
activate CommandBox

CommandBox -> CommandBox : handleTab()
activate CommandBox

CommandBox -> CommandBox : getCurrentInput()
activate CommandBox

CommandBox --> CommandBox : "fi"
deactivate CommandBox

CommandBox -> CommandBox : autocomplete("fi")
activate CommandBox

note right of CommandBox
  Searches BUILT_IN_COMMANDS
  (which is LogicManager.ALL_COMMANDS)
end note

CommandBox --> CommandBox : match result
deactivate CommandBox

alt single match found
    CommandBox -> CommandBox : setText("find ")
    activate CommandBox
    deactivate CommandBox

    CommandBox -> CommandBox : positionCaret()
    activate CommandBox
    deactivate CommandBox
else multiple matches found
    CommandBox -> CommandBox : build suggestions string
    activate CommandBox
    deactivate CommandBox

    CommandBox -> ResultDisplay : setFeedbackToUser(suggestions)
    activate ResultDisplay
    deactivate ResultDisplay
end

deactivate CommandBox

CommandBox --> User : displays autocompleted command
deactivate CommandBox
@enduml

